'use strict';var react=require('react'),rehypeHarden=require('rehype-harden'),Pe=require('rehype-katex'),wn=require('rehype-raw'),kn=require('remark-cjk-friendly'),vn=require('remark-cjk-friendly-gfm-strikethrough'),Cn=require('remark-gfm'),Te=require('remark-math'),lucideReact=require('lucide-react'),clsx=require('clsx'),tailwindMerge=require('tailwind-merge'),jsxRuntime=require('react/jsx-runtime'),hastUtilToJsxRuntime=require('hast-util-to-jsx-runtime'),Io=require('remark-parse'),Bo=require('remark-rehype'),unified=require('unified'),marked=require('marked');function _interopDefault(e){return e&&e.__esModule?e:{default:e}}var Pe__default=/*#__PURE__*/_interopDefault(Pe);var wn__default=/*#__PURE__*/_interopDefault(wn);var kn__default=/*#__PURE__*/_interopDefault(kn);var vn__default=/*#__PURE__*/_interopDefault(vn);var Cn__default=/*#__PURE__*/_interopDefault(Cn);var Te__default=/*#__PURE__*/_interopDefault(Te);var Io__default=/*#__PURE__*/_interopDefault(Io);var Bo__default=/*#__PURE__*/_interopDefault(Bo);var u=(...e)=>tailwindMerge.twMerge(clsx.clsx(e)),I=(e,t,o)=>{let n=typeof t=="string"?new Blob([t],{type:o}):t,s=URL.createObjectURL(n),r=document.createElement("a");r.href=s,r.download=e,document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(s);};var Ht=react.createContext({code:""}),G=()=>react.useContext(Ht);var de=({onCopy:e,onError:t,timeout:o=2e3,children:n,className:s,code:r,...i})=>{let[a,l]=react.useState(false),d=react.useRef(0),{code:m}=G(),{isAnimating:c}=react.useContext(M),p=r!=null?r:m,g=async()=>{var h;if(typeof window=="undefined"||!((h=navigator==null?void 0:navigator.clipboard)!=null&&h.writeText)){t==null||t(new Error("Clipboard API not available"));return}try{a||(await navigator.clipboard.writeText(p),l(!0),e==null||e(),d.current=window.setTimeout(()=>l(!1),o));}catch(w){t==null||t(w);}};react.useEffect(()=>()=>{window.clearTimeout(d.current);},[]);let f=a?lucideReact.CheckIcon:lucideReact.CopyIcon;return jsxRuntime.jsx("button",{className:u("cursor-pointer p-1 text-muted-foreground transition-all hover:text-foreground disabled:cursor-not-allowed disabled:opacity-50",s),"data-streamdown":"code-block-copy-button",disabled:c,onClick:g,title:"Copy Code",type:"button",...i,children:n!=null?n:jsxRuntime.jsx(f,{size:14})})};var xe={"1c":"1c","1c-query":"1cq",abap:"abap","actionscript-3":"as",ada:"ada",adoc:"adoc","angular-html":"html","angular-ts":"ts",apache:"conf",apex:"cls",apl:"apl",applescript:"applescript",ara:"ara",asciidoc:"adoc",asm:"asm",astro:"astro",awk:"awk",ballerina:"bal",bash:"sh",bat:"bat",batch:"bat",be:"be",beancount:"beancount",berry:"berry",bibtex:"bib",bicep:"bicep",blade:"blade.php",bsl:"bsl",c:"c","c#":"cs","c++":"cpp",cadence:"cdc",cairo:"cairo",cdc:"cdc",clarity:"clar",clj:"clj",clojure:"clj","closure-templates":"soy",cmake:"cmake",cmd:"cmd",cobol:"cob",codeowners:"CODEOWNERS",codeql:"ql",coffee:"coffee",coffeescript:"coffee","common-lisp":"lisp",console:"sh",coq:"v",cpp:"cpp",cql:"cql",crystal:"cr",cs:"cs",csharp:"cs",css:"css",csv:"csv",cue:"cue",cypher:"cql",d:"d",dart:"dart",dax:"dax",desktop:"desktop",diff:"diff",docker:"dockerfile",dockerfile:"dockerfile",dotenv:"env","dream-maker":"dm",edge:"edge",elisp:"el",elixir:"ex",elm:"elm","emacs-lisp":"el",erb:"erb",erl:"erl",erlang:"erl",f:"f","f#":"fs",f03:"f03",f08:"f08",f18:"f18",f77:"f77",f90:"f90",f95:"f95",fennel:"fnl",fish:"fish",fluent:"ftl",for:"for","fortran-fixed-form":"f","fortran-free-form":"f90",fs:"fs",fsharp:"fs",fsl:"fsl",ftl:"ftl",gdresource:"tres",gdscript:"gd",gdshader:"gdshader",genie:"gs",gherkin:"feature","git-commit":"gitcommit","git-rebase":"gitrebase",gjs:"js",gleam:"gleam","glimmer-js":"js","glimmer-ts":"ts",glsl:"glsl",gnuplot:"plt",go:"go",gql:"gql",graphql:"graphql",groovy:"groovy",gts:"gts",hack:"hack",haml:"haml",handlebars:"hbs",haskell:"hs",haxe:"hx",hbs:"hbs",hcl:"hcl",hjson:"hjson",hlsl:"hlsl",hs:"hs",html:"html","html-derivative":"html",http:"http",hxml:"hxml",hy:"hy",imba:"imba",ini:"ini",jade:"jade",java:"java",javascript:"js",jinja:"jinja",jison:"jison",jl:"jl",js:"js",json:"json",json5:"json5",jsonc:"jsonc",jsonl:"jsonl",jsonnet:"jsonnet",jssm:"jssm",jsx:"jsx",julia:"jl",kotlin:"kt",kql:"kql",kt:"kt",kts:"kts",kusto:"kql",latex:"tex",lean:"lean",lean4:"lean",less:"less",liquid:"liquid",lisp:"lisp",lit:"lit",llvm:"ll",log:"log",logo:"logo",lua:"lua",luau:"luau",make:"mak",makefile:"mak",markdown:"md",marko:"marko",matlab:"m",md:"md",mdc:"mdc",mdx:"mdx",mediawiki:"wiki",mermaid:"mmd",mips:"s",mipsasm:"s",mmd:"mmd",mojo:"mojo",move:"move",nar:"nar",narrat:"narrat",nextflow:"nf",nf:"nf",nginx:"conf",nim:"nim",nix:"nix",nu:"nu",nushell:"nu",objc:"m","objective-c":"m","objective-cpp":"mm",ocaml:"ml",pascal:"pas",perl:"pl",perl6:"p6",php:"php",plsql:"pls",po:"po",polar:"polar",postcss:"pcss",pot:"pot",potx:"potx",powerquery:"pq",powershell:"ps1",prisma:"prisma",prolog:"pl",properties:"properties",proto:"proto",protobuf:"proto",ps:"ps",ps1:"ps1",pug:"pug",puppet:"pp",purescript:"purs",py:"py",python:"py",ql:"ql",qml:"qml",qmldir:"qmldir",qss:"qss",r:"r",racket:"rkt",raku:"raku",razor:"cshtml",rb:"rb",reg:"reg",regex:"regex",regexp:"regexp",rel:"rel",riscv:"s",rs:"rs",rst:"rst",ruby:"rb",rust:"rs",sas:"sas",sass:"sass",scala:"scala",scheme:"scm",scss:"scss",sdbl:"sdbl",sh:"sh",shader:"shader",shaderlab:"shader",shell:"sh",shellscript:"sh",shellsession:"sh",smalltalk:"st",solidity:"sol",soy:"soy",sparql:"rq",spl:"spl",splunk:"spl",sql:"sql","ssh-config":"config",stata:"do",styl:"styl",stylus:"styl",svelte:"svelte",swift:"swift","system-verilog":"sv",systemd:"service",talon:"talon",talonscript:"talon",tasl:"tasl",tcl:"tcl",templ:"templ",terraform:"tf",tex:"tex",tf:"tf",tfvars:"tfvars",toml:"toml",ts:"ts","ts-tags":"ts",tsp:"tsp",tsv:"tsv",tsx:"tsx",turtle:"ttl",twig:"twig",typ:"typ",typescript:"ts",typespec:"tsp",typst:"typ",v:"v",vala:"vala",vb:"vb",verilog:"v",vhdl:"vhdl",vim:"vim",viml:"vim",vimscript:"vim",vue:"vue","vue-html":"html","vue-vine":"vine",vy:"vy",vyper:"vy",wasm:"wasm",wenyan:"wy",wgsl:"wgsl",wiki:"wiki",wikitext:"wiki",wit:"wit",wl:"wl",wolfram:"wl",xml:"xml",xsl:"xsl",yaml:"yaml",yml:"yml",zenscript:"zs",zig:"zig",zsh:"zsh",\u6587\u8A00:"wy"},Ie=({onDownload:e,onError:t,language:o,children:n,className:s,code:r,...i})=>{let{code:a}=G(),{isAnimating:l}=react.useContext(M),d=r!=null?r:a,c=`file.${o&&o in xe?xe[o]:"txt"}`,p="text/plain",g=()=>{try{I(c,d,p),e==null||e();}catch(f){t==null||t(f);}};return jsxRuntime.jsx("button",{className:u("cursor-pointer p-1 text-muted-foreground transition-all hover:text-foreground disabled:cursor-not-allowed disabled:opacity-50",s),"data-streamdown":"code-block-download-button",disabled:l,onClick:g,title:"Download file",type:"button",...i,children:n!=null?n:jsxRuntime.jsx(lucideReact.DownloadIcon,{size:14})})};var pe=()=>jsxRuntime.jsxs("div",{className:"w-full divide-y divide-border overflow-hidden rounded-xl border border-border",children:[jsxRuntime.jsx("div",{className:"h-[46px] w-full bg-muted/80"}),jsxRuntime.jsx("div",{className:"flex w-full items-center justify-center p-4",children:jsxRuntime.jsx(lucideReact.Loader2Icon,{className:"size-4 animate-spin"})})]});var Gt=/\.[^/.]+$/,Be=({node:e,className:t,src:o,alt:n,...s})=>{let r=async()=>{if(o)try{let a=await(await fetch(o)).blob(),d=new URL(o,window.location.origin).pathname.split("/").pop()||"",m=d.split(".").pop(),c=d.includes(".")&&m!==void 0&&m.length<=4,p="";if(c)p=d;else {let g=a.type,f="png";g.includes("jpeg")||g.includes("jpg")?f="jpg":g.includes("png")?f="png":g.includes("svg")?f="svg":g.includes("gif")?f="gif":g.includes("webp")&&(f="webp"),p=`${(n||d||"image").replace(Gt,"")}.${f}`;}I(p,a,a.type);}catch(i){console.error("Failed to download image:",i);}};return o?jsxRuntime.jsxs("div",{className:"group relative my-4 inline-block","data-streamdown":"image-wrapper",children:[jsxRuntime.jsx("img",{alt:n,className:u("max-w-full rounded-lg",t),"data-streamdown":"image",src:o,...s}),jsxRuntime.jsx("div",{className:"pointer-events-none absolute inset-0 hidden rounded-lg bg-black/10 group-hover:block"}),jsxRuntime.jsx("button",{className:u("absolute right-2 bottom-2 flex h-8 w-8 cursor-pointer items-center justify-center rounded-md border border-border bg-background/90 shadow-sm backdrop-blur-sm transition-all duration-200 hover:bg-background","opacity-0 group-hover:opacity-100"),onClick:r,title:"Download image",type:"button",children:jsxRuntime.jsx(lucideReact.DownloadIcon,{size:14})})]}):null};var Q=async e=>{let o={...{startOnLoad:false,theme:"default",securityLevel:"strict",fontFamily:"monospace",suppressErrorRendering:true},...e},s=(await import('mermaid')).default;return s.initialize(o),s},Ae=(e,t)=>{var n;let o=(n=void 0)!=null?n:5;return new Promise((s,r)=>{let i="data:image/svg+xml;base64,"+btoa(unescape(encodeURIComponent(e))),a=new Image;a.crossOrigin="anonymous",a.onload=()=>{let l=document.createElement("canvas"),d=a.width*o,m=a.height*o;l.width=d,l.height=m;let c=l.getContext("2d");if(!c){r(new Error("Failed to create 2D canvas context for PNG export"));return}c.drawImage(a,0,0,d,m),l.toBlob(p=>{if(!p){r(new Error("Failed to create PNG blob"));return}s(p);},"image/png");},a.onerror=()=>r(new Error("Failed to load SVG image")),a.src=i;})};var Re=({chart:e,children:t,className:o,onDownload:n,config:s,onError:r})=>{let[i,a]=react.useState(false),l=react.useRef(null),{isAnimating:d}=react.useContext(M),m=async c=>{try{if(c==="mmd"){I("diagram.mmd",e,"text/plain"),a(!1),n==null||n(c);return}let p=await Q(s),g=e.split("").reduce((w,v)=>(w<<5)-w+v.charCodeAt(0)|0,0),f=`mermaid-${Math.abs(g)}-${Date.now()}-${Math.random().toString(36).substring(2,9)}`,{svg:h}=await p.render(f,e);if(!h){r==null||r(new Error("SVG not found. Please wait for the diagram to render."));return}if(c==="svg"){I("diagram.svg",h,"image/svg+xml"),a(!1),n==null||n(c);return}if(c==="png"){let w=await Ae(h);I("diagram.png",w,"image/png"),n==null||n(c),a(!1);return}}catch(p){r==null||r(p);}};return react.useEffect(()=>{let c=p=>{l.current&&!l.current.contains(p.target)&&a(false);};return document.addEventListener("mousedown",c),()=>{document.removeEventListener("mousedown",c);}},[]),jsxRuntime.jsxs("div",{className:"relative",ref:l,children:[jsxRuntime.jsx("button",{className:u("cursor-pointer p-1 text-muted-foreground transition-all hover:text-foreground disabled:cursor-not-allowed disabled:opacity-50",o),disabled:d,onClick:()=>a(!i),title:"Download diagram",type:"button",children:t!=null?t:jsxRuntime.jsx(lucideReact.DownloadIcon,{size:14})}),i&&jsxRuntime.jsxs("div",{className:"absolute top-full right-0 z-10 mt-1 min-w-[120px] overflow-hidden rounded-md border border-border bg-background shadow-lg",children:[jsxRuntime.jsx("button",{className:"w-full px-3 py-2 text-left text-sm transition-colors hover:bg-muted/40",onClick:()=>m("svg"),type:"button",title:"Download diagram as SVG",children:"SVG"}),jsxRuntime.jsx("button",{className:"w-full px-3 py-2 text-left text-sm transition-colors hover:bg-muted/40",onClick:()=>m("png"),type:"button",title:"Download diagram as PNG",children:"PNG"}),jsxRuntime.jsx("button",{className:"w-full px-3 py-2 text-left text-sm transition-colors hover:bg-muted/40",onClick:()=>m("mmd"),type:"button",title:"Download diagram as MMD",children:"MMD"})]})]})};var X=0,lo=()=>{X+=1,X===1&&(document.body.style.overflow="hidden");},co=()=>{X=Math.max(0,X-1),X===0&&(document.body.style.overflow="");},je=({chart:e,config:t,onFullscreen:o,onExit:n,className:s,...r})=>{let[i,a]=react.useState(false),{isAnimating:l,controls:d}=react.useContext(M),m=(()=>{if(typeof d=="boolean")return d;let p=d.mermaid;return p===false?false:p===true||p===void 0?true:p.panZoom!==false})(),c=()=>{a(!i);};return react.useEffect(()=>{if(i){lo();let p=g=>{g.key==="Escape"&&a(false);};return document.addEventListener("keydown",p),()=>{document.removeEventListener("keydown",p),co();}}},[i]),react.useEffect(()=>{i?o==null||o():n&&n();},[i,o,n]),jsxRuntime.jsxs(jsxRuntime.Fragment,{children:[jsxRuntime.jsx("button",{className:u("cursor-pointer p-1 text-muted-foreground transition-all hover:text-foreground disabled:cursor-not-allowed disabled:opacity-50",s),disabled:l,onClick:c,title:"View fullscreen",type:"button",...r,children:jsxRuntime.jsx(lucideReact.Maximize2Icon,{size:14})}),i&&jsxRuntime.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-background/95 backdrop-blur-sm",onClick:c,onKeyDown:p=>{p.key==="Escape"&&c();},role:"button",tabIndex:0,children:[jsxRuntime.jsx("button",{className:"absolute top-4 right-4 z-10 rounded-md p-2 text-muted-foreground transition-all hover:bg-muted hover:text-foreground",onClick:c,title:"Exit fullscreen",type:"button",children:jsxRuntime.jsx(lucideReact.XIcon,{size:20})}),jsxRuntime.jsx("div",{className:"flex h-full w-full items-center justify-center p-4",onClick:p=>p.stopPropagation(),onKeyDown:p=>p.stopPropagation(),role:"presentation",children:jsxRuntime.jsx(De,{chart:e,className:"h-full w-full [&>div]:h-full [&>div]:overflow-hidden [&_svg]:h-auto [&_svg]:w-auto",config:t,fullscreen:true,showControls:m})})]})]})};var ee=e=>{var r,i;let t=[],o=[],n=e.querySelectorAll("thead th");for(let a of n)t.push(((r=a.textContent)==null?void 0:r.trim())||"");let s=e.querySelectorAll("tbody tr");for(let a of s){let l=[],d=a.querySelectorAll("td");for(let m of d)l.push(((i=m.textContent)==null?void 0:i.trim())||"");o.push(l);}return {headers:t,rows:o}},te=e=>{let{headers:t,rows:o}=e,n=a=>{let l=false,d=false;for(let m=0;m<a.length;m+=1){let c=a[m];if(c==='"'){l=true,d=true;break}(c===","||c===`
`)&&(l=true);}return l?d?`"${a.replace(/"/g,'""')}"`:`"${a}"`:a},s=t.length>0?o.length+1:o.length,r=new Array(s),i=0;t.length>0&&(r[i]=t.map(n).join(","),i+=1);for(let a of o)r[i]=a.map(n).join(","),i+=1;return r.join(`
`)},Oe=e=>{let{headers:t,rows:o}=e,n=a=>{let l=false;for(let m=0;m<a.length;m+=1){let c=a[m];if(c==="	"||c===`
`||c==="\r"){l=true;break}}if(!l)return a;let d=[];for(let m=0;m<a.length;m+=1){let c=a[m];c==="	"?d.push("\\t"):c===`
`?d.push("\\n"):c==="\r"?d.push("\\r"):d.push(c);}return d.join("")},s=t.length>0?o.length+1:o.length,r=new Array(s),i=0;t.length>0&&(r[i]=t.map(n).join("	"),i+=1);for(let a of o)r[i]=a.map(n).join("	"),i+=1;return r.join(`
`)},ue=e=>{let t=false;for(let n=0;n<e.length;n+=1){let s=e[n];if(s==="\\"||s==="|"){t=true;break}}if(!t)return e;let o=[];for(let n=0;n<e.length;n+=1){let s=e[n];s==="\\"?o.push("\\\\"):s==="|"?o.push("\\|"):o.push(s);}return o.join("")},He=e=>{let{headers:t,rows:o}=e;if(t.length===0)return "";let n=new Array(o.length+2),s=0,r=t.map(a=>ue(a));n[s]=`| ${r.join(" | ")} |`,s+=1;let i=new Array(t.length);for(let a=0;a<t.length;a+=1)i[a]="---";n[s]=`| ${i.join(" | ")} |`,s+=1;for(let a of o)if(a.length<t.length){let l=new Array(t.length);for(let d=0;d<t.length;d+=1)l[d]=d<a.length?ue(a[d]):"";n[s]=`| ${l.join(" | ")} |`,s+=1;}else {let l=a.map(d=>ue(d));n[s]=`| ${l.join(" | ")} |`,s+=1;}return n.join(`
`)};var Ue=({children:e,className:t,onCopy:o,onError:n,timeout:s=2e3})=>{let[r,i]=react.useState(false),[a,l]=react.useState(false),d=react.useRef(null),m=react.useRef(0),{isAnimating:c}=react.useContext(M),p=async f=>{var h,w;if(typeof window=="undefined"||!((h=navigator==null?void 0:navigator.clipboard)!=null&&h.write)){n==null||n(new Error("Clipboard API not available"));return}try{let v=(w=d.current)==null?void 0:w.closest('[data-streamdown="table-wrapper"]'),N=v==null?void 0:v.querySelector("table");if(!N){n==null||n(new Error("Table not found"));return}let P=ee(N),T=f==="csv"?te(P):Oe(P),D=new ClipboardItem({"text/plain":new Blob([T],{type:"text/plain"}),"text/html":new Blob([N.outerHTML],{type:"text/html"})});await navigator.clipboard.write([D]),l(!0),i(!1),o==null||o(f),m.current=window.setTimeout(()=>l(!1),s);}catch(v){n==null||n(v);}};react.useEffect(()=>{let f=h=>{d.current&&!d.current.contains(h.target)&&i(false);};return document.addEventListener("mousedown",f),()=>{document.removeEventListener("mousedown",f),window.clearTimeout(m.current);}},[]);let g=a?lucideReact.CheckIcon:lucideReact.CopyIcon;return jsxRuntime.jsxs("div",{className:"relative",ref:d,children:[jsxRuntime.jsx("button",{className:u("cursor-pointer p-1 text-muted-foreground transition-all hover:text-foreground disabled:cursor-not-allowed disabled:opacity-50",t),disabled:c,onClick:()=>i(!r),title:"Copy table",type:"button",children:e!=null?e:jsxRuntime.jsx(g,{size:14})}),r&&jsxRuntime.jsxs("div",{className:"absolute top-full right-0 z-10 mt-1 min-w-[120px] overflow-hidden rounded-md border border-border bg-background shadow-lg",children:[jsxRuntime.jsx("button",{className:"w-full px-3 py-2 text-left text-sm transition-colors hover:bg-muted/40",onClick:()=>p("csv"),type:"button",title:"Copy table as CSV",children:"CSV"}),jsxRuntime.jsx("button",{className:"w-full px-3 py-2 text-left text-sm transition-colors hover:bg-muted/40",onClick:()=>p("tsv"),type:"button",title:"Copy table as TSV",children:"TSV"})]})]})};var Fe=({children:e,className:t,onDownload:o,onError:n})=>{let[s,r]=react.useState(false),i=react.useRef(null),{isAnimating:a}=react.useContext(M),l=d=>{var m;try{let c=(m=i.current)==null?void 0:m.closest('[data-streamdown="table-wrapper"]'),p=c==null?void 0:c.querySelector("table");if(!p){n==null||n(new Error("Table not found"));return}let g=ee(p),f=d==="csv"?te(g):He(g);I(`table.${d==="csv"?"csv":"md"}`,f,d==="csv"?"text/csv":"text/markdown"),r(!1),o==null||o(d);}catch(c){n==null||n(c);}};return react.useEffect(()=>{let d=m=>{i.current&&!i.current.contains(m.target)&&r(false);};return document.addEventListener("mousedown",d),()=>{document.removeEventListener("mousedown",d);}},[]),jsxRuntime.jsxs("div",{className:"relative",ref:i,children:[jsxRuntime.jsx("button",{className:u("cursor-pointer p-1 text-muted-foreground transition-all hover:text-foreground disabled:cursor-not-allowed disabled:opacity-50",t),disabled:a,onClick:()=>r(!s),title:"Download table",type:"button",children:e!=null?e:jsxRuntime.jsx(lucideReact.DownloadIcon,{size:14})}),s&&jsxRuntime.jsxs("div",{className:"absolute top-full right-0 z-10 mt-1 min-w-[120px] overflow-hidden rounded-md border border-border bg-background shadow-lg",children:[jsxRuntime.jsx("button",{className:"w-full px-3 py-2 text-left text-sm transition-colors hover:bg-muted/40",onClick:()=>l("csv"),type:"button",title:"Download table as CSV",children:"CSV"}),jsxRuntime.jsx("button",{className:"w-full px-3 py-2 text-left text-sm transition-colors hover:bg-muted/40",onClick:()=>l("markdown"),type:"button",title:"Download table as Markdown",children:"Markdown"})]})]})};var Je=({children:e,className:t,showControls:o,...n})=>jsxRuntime.jsxs("div",{className:"my-4 flex flex-col space-y-2","data-streamdown":"table-wrapper",children:[o&&jsxRuntime.jsxs("div",{className:"flex items-center justify-end gap-1",children:[jsxRuntime.jsx(Ue,{}),jsxRuntime.jsx(Fe,{})]}),jsxRuntime.jsx("div",{className:"overflow-x-auto",children:jsxRuntime.jsx("table",{className:u("w-full border-collapse border border-border",t),"data-streamdown":"table",...n,children:e})})]});var vo=react.lazy(()=>import('./code-block-LTULQHW3.cjs').then(e=>({default:e.CodeBlock}))),Co=react.lazy(()=>import('./mermaid-NTG464FS.cjs').then(e=>({default:e.Mermaid}))),Mo=/language-([^\s]+)/;function ae(e,t){if(!(e!=null&&e.position||t!=null&&t.position))return  true;if(!(e!=null&&e.position&&(t!=null&&t.position)))return  false;let o=e.position.start,n=t.position.start,s=e.position.end,r=t.position.end;return (o==null?void 0:o.line)===(n==null?void 0:n.line)&&(o==null?void 0:o.column)===(n==null?void 0:n.column)&&(s==null?void 0:s.line)===(r==null?void 0:r.line)&&(s==null?void 0:s.column)===(r==null?void 0:r.column)}function C(e,t){return e.className===t.className&&ae(e.node,t.node)}var ge=(e,t)=>typeof e=="boolean"?e:e[t]!==false,se=(e,t)=>{if(typeof e=="boolean")return e;let o=e.mermaid;return o===false?false:o===true||o===void 0?true:o[t]!==false},he=react.memo(({children:e,className:t,node:o,...n})=>jsxRuntime.jsx("ol",{className:u("list-inside list-decimal whitespace-normal",t),"data-streamdown":"ordered-list",...n,children:e}),(e,t)=>C(e,t));he.displayName="MarkdownOl";var Ge=react.memo(({children:e,className:t,node:o,...n})=>jsxRuntime.jsx("li",{className:u("py-1 [&>p]:inline",t),"data-streamdown":"list-item",...n,children:e}),(e,t)=>e.className===t.className&&ae(e.node,t.node));Ge.displayName="MarkdownLi";var Ye=react.memo(({children:e,className:t,node:o,...n})=>jsxRuntime.jsx("ul",{className:u("list-inside list-disc whitespace-normal",t),"data-streamdown":"unordered-list",...n,children:e}),(e,t)=>C(e,t));Ye.displayName="MarkdownUl";var Qe=react.memo(({className:e,node:t,...o})=>jsxRuntime.jsx("hr",{className:u("my-6 border-border",e),"data-streamdown":"horizontal-rule",...o}),(e,t)=>C(e,t));Qe.displayName="MarkdownHr";var et=react.memo(({children:e,className:t,node:o,...n})=>jsxRuntime.jsx("span",{className:u("font-semibold",t),"data-streamdown":"strong",...n,children:e}),(e,t)=>C(e,t));et.displayName="MarkdownStrong";var tt=react.memo(({children:e,className:t,href:o,node:n,...s})=>{let r=o==="streamdown:incomplete-link";return jsxRuntime.jsx("a",{className:u("wrap-anywhere font-medium text-primary underline",t),"data-incomplete":r,"data-streamdown":"link",href:o,rel:"noreferrer",target:"_blank",...s,children:e})},(e,t)=>C(e,t)&&e.href===t.href);tt.displayName="MarkdownA";var ot=react.memo(({children:e,className:t,node:o,...n})=>jsxRuntime.jsx("h1",{className:u("mt-6 mb-2 font-semibold text-3xl",t),"data-streamdown":"heading-1",...n,children:e}),(e,t)=>C(e,t));ot.displayName="MarkdownH1";var nt=react.memo(({children:e,className:t,node:o,...n})=>jsxRuntime.jsx("h2",{className:u("mt-6 mb-2 font-semibold text-2xl",t),"data-streamdown":"heading-2",...n,children:e}),(e,t)=>C(e,t));nt.displayName="MarkdownH2";var rt=react.memo(({children:e,className:t,node:o,...n})=>jsxRuntime.jsx("h3",{className:u("mt-6 mb-2 font-semibold text-xl",t),"data-streamdown":"heading-3",...n,children:e}),(e,t)=>C(e,t));rt.displayName="MarkdownH3";var st=react.memo(({children:e,className:t,node:o,...n})=>jsxRuntime.jsx("h4",{className:u("mt-6 mb-2 font-semibold text-lg",t),"data-streamdown":"heading-4",...n,children:e}),(e,t)=>C(e,t));st.displayName="MarkdownH4";var at=react.memo(({children:e,className:t,node:o,...n})=>jsxRuntime.jsx("h5",{className:u("mt-6 mb-2 font-semibold text-base",t),"data-streamdown":"heading-5",...n,children:e}),(e,t)=>C(e,t));at.displayName="MarkdownH5";var it=react.memo(({children:e,className:t,node:o,...n})=>jsxRuntime.jsx("h6",{className:u("mt-6 mb-2 font-semibold text-sm",t),"data-streamdown":"heading-6",...n,children:e}),(e,t)=>C(e,t));it.displayName="MarkdownH6";var lt=react.memo(({children:e,className:t,node:o,...n})=>{let{controls:s}=react.useContext(M),r=ge(s,"table");return jsxRuntime.jsx(Je,{className:t,"data-streamdown":"table-wrapper",showControls:r,...n,children:e})},(e,t)=>C(e,t));lt.displayName="MarkdownTable";var ct=react.memo(({children:e,className:t,node:o,...n})=>jsxRuntime.jsx("thead",{className:u("bg-muted/80",t),"data-streamdown":"table-header",...n,children:e}),(e,t)=>C(e,t));ct.displayName="MarkdownThead";var dt=react.memo(({children:e,className:t,node:o,...n})=>jsxRuntime.jsx("tbody",{className:u("divide-y divide-border bg-muted/40",t),"data-streamdown":"table-body",...n,children:e}),(e,t)=>C(e,t));dt.displayName="MarkdownTbody";var mt=react.memo(({children:e,className:t,node:o,...n})=>jsxRuntime.jsx("tr",{className:u("border-border border-b",t),"data-streamdown":"table-row",...n,children:e}),(e,t)=>C(e,t));mt.displayName="MarkdownTr";var pt=react.memo(({children:e,className:t,node:o,...n})=>jsxRuntime.jsx("th",{className:u("whitespace-nowrap px-4 py-2 text-left font-semibold text-sm",t),"data-streamdown":"table-header-cell",...n,children:e}),(e,t)=>C(e,t));pt.displayName="MarkdownTh";var ut=react.memo(({children:e,className:t,node:o,...n})=>jsxRuntime.jsx("td",{className:u("px-4 py-2 text-sm",t),"data-streamdown":"table-cell",...n,children:e}),(e,t)=>C(e,t));ut.displayName="MarkdownTd";var ft=react.memo(({children:e,className:t,node:o,...n})=>jsxRuntime.jsx("blockquote",{className:u("my-4 border-muted-foreground/30 border-l-4 pl-4 text-muted-foreground italic",t),"data-streamdown":"blockquote",...n,children:e}),(e,t)=>C(e,t));ft.displayName="MarkdownBlockquote";var gt=react.memo(({children:e,className:t,node:o,...n})=>jsxRuntime.jsx("sup",{className:u("text-sm",t),"data-streamdown":"superscript",...n,children:e}),(e,t)=>C(e,t));gt.displayName="MarkdownSup";var ht=react.memo(({children:e,className:t,node:o,...n})=>jsxRuntime.jsx("sub",{className:u("text-sm",t),"data-streamdown":"subscript",...n,children:e}),(e,t)=>C(e,t));ht.displayName="MarkdownSub";var bt=react.memo(({children:e,className:t,node:o,...n})=>{if("data-footnotes"in n){let r=l=>{var p,g;if(!react.isValidElement(l))return  false;let d=Array.isArray(l.props.children)?l.props.children:[l.props.children],m=false,c=false;for(let f of d)if(f){if(typeof f=="string")f.trim()!==""&&(m=true);else if(react.isValidElement(f))if(((p=f.props)==null?void 0:p["data-footnote-backref"])!==void 0)c=true;else {let h=Array.isArray(f.props.children)?f.props.children:[f.props.children];for(let w of h){if(typeof w=="string"&&w.trim()!==""){m=true;break}if(react.isValidElement(w)&&((g=w.props)==null?void 0:g["data-footnote-backref"])===void 0){m=true;break}}}}return c&&!m},i=Array.isArray(e)?e.map(l=>{if(!react.isValidElement(l))return l;if(l.type===he){let m=(Array.isArray(l.props.children)?l.props.children:[l.props.children]).filter(c=>!r(c));return m.length===0?null:{...l,props:{...l.props,children:m}}}return l}):e;return (Array.isArray(i)?i.some(l=>l!==null):i!==null)?jsxRuntime.jsx("section",{className:t,...n,children:i}):null}return jsxRuntime.jsx("section",{className:t,...n,children:e})},(e,t)=>C(e,t));bt.displayName="MarkdownSection";var Po=({node:e,className:t,children:o,...n})=>{var c,p,g;let s=((c=e==null?void 0:e.position)==null?void 0:c.start.line)===((p=e==null?void 0:e.position)==null?void 0:p.end.line),{mermaid:r,controls:i}=react.useContext(M);if(s)return jsxRuntime.jsx("code",{className:u("rounded bg-muted px-1.5 py-0.5 font-mono text-sm",t),"data-streamdown":"inline-code",...n,children:o});let a=t==null?void 0:t.match(Mo),l=(g=a==null?void 0:a.at(1))!=null?g:"",d="";if(react.isValidElement(o)&&o.props&&typeof o.props=="object"&&"children"in o.props&&typeof o.props.children=="string"?d=o.props.children:typeof o=="string"&&(d=o),l==="mermaid"){let f=ge(i,"mermaid"),h=se(i,"download"),w=se(i,"copy"),v=se(i,"fullscreen"),N=se(i,"panZoom");return jsxRuntime.jsx(react.Suspense,{fallback:jsxRuntime.jsx(pe,{}),children:jsxRuntime.jsxs("div",{className:u("group relative my-4 h-auto rounded-xl border p-4",t),"data-streamdown":"mermaid-block",children:[f&&(h||w||v)&&jsxRuntime.jsxs("div",{className:"flex items-center justify-end gap-2",children:[h&&jsxRuntime.jsx(Re,{chart:d,config:r==null?void 0:r.config}),w&&jsxRuntime.jsx(de,{code:d}),v&&jsxRuntime.jsx(je,{chart:d,config:r==null?void 0:r.config})]}),jsxRuntime.jsx(Co,{chart:d,config:r==null?void 0:r.config,showControls:N})]})})}let m=ge(i,"code");return jsxRuntime.jsx(react.Suspense,{fallback:jsxRuntime.jsx(pe,{}),children:jsxRuntime.jsx(vo,{className:u("overflow-x-auto border-border border-t",t),code:d,language:l,children:m&&jsxRuntime.jsxs(jsxRuntime.Fragment,{children:[jsxRuntime.jsx(Ie,{code:d,language:l}),jsxRuntime.jsx(de,{})]})})})},yt=react.memo(Po,(e,t)=>e.className===t.className&&ae(e.node,t.node));yt.displayName="MarkdownCode";var wt=react.memo(Be,(e,t)=>e.className===t.className&&ae(e.node,t.node));wt.displayName="MarkdownImg";var kt=react.memo(({children:e,className:t,node:o,...n})=>{var i;let r=(Array.isArray(e)?e:[e]).filter(a=>a!=null&&a!=="");return r.length===1&&react.isValidElement(r[0])&&((i=r[0].props.node)==null?void 0:i.tagName)==="img"?jsxRuntime.jsx(jsxRuntime.Fragment,{children:e}):jsxRuntime.jsx("p",{className:t,...n,children:e})},(e,t)=>C(e,t));kt.displayName="MarkdownParagraph";var vt={ol:he,li:Ge,ul:Ye,hr:Qe,strong:et,a:tt,h1:ot,h2:nt,h3:rt,h4:st,h5:at,h6:it,table:lt,thead:ct,tbody:dt,tr:mt,th:pt,td:ut,blockquote:ft,code:yt,img:wt,pre:({children:e})=>e,sup:gt,sub:ht,p:kt,section:bt};var Mt=[],Pt={allowDangerousHtml:true},ie=new WeakMap,be=class{constructor(){this.cache=new Map;this.keyCache=new WeakMap;this.maxSize=100;}generateCacheKey(t){let o=this.keyCache.get(t);if(o)return o;let n=t.rehypePlugins,s=t.remarkPlugins,r=t.remarkRehypeOptions;if(!(n||s||r)){let c="default";return this.keyCache.set(t,c),c}let i=c=>{if(!c||c.length===0)return "";let p="";for(let g=0;g<c.length;g+=1){let f=c[g];if(g>0&&(p+=","),Array.isArray(f)){let[h,w]=f;if(typeof h=="function"){let v=ie.get(h);v||(v=h.name,ie.set(h,v)),p+=v;}else p+=String(h);p+=":",p+=JSON.stringify(w);}else if(typeof f=="function"){let h=ie.get(f);h||(h=f.name,ie.set(f,h)),p+=h;}else p+=String(f);}return p},a=i(n),l=i(s),d=r?JSON.stringify(r):"",m=`${l}::${a}::${d}`;return this.keyCache.set(t,m),m}get(t){let o=this.generateCacheKey(t),n=this.cache.get(o);return n&&(this.cache.delete(o),this.cache.set(o,n)),n}set(t,o){let n=this.generateCacheKey(t);if(this.cache.size>=this.maxSize){let s=this.cache.keys().next().value;s&&this.cache.delete(s);}this.cache.set(n,o);}clear(){this.cache.clear();}},Tt=new be,ye=e=>{let t=Lo(e),o=e.children||"";return Eo(t.runSync(t.parse(o),o),e)},Lo=e=>{let t=Tt.get(e);if(t)return t;let o=Ro(e);return Tt.set(e,o),o},Ro=e=>{let t=e.rehypePlugins||Mt,o=e.remarkPlugins||Mt,n=e.remarkRehypeOptions?{...Pt,...e.remarkRehypeOptions}:Pt;return unified.unified().use(Io__default.default).use(o).use(Bo__default.default,n).use(t)},Eo=(e,t)=>hastUtilToJsxRuntime.toJsxRuntime(e,{Fragment:jsxRuntime.Fragment,components:t.components,ignoreInvalidStyle:true,jsx:jsxRuntime.jsx,jsxs:jsxRuntime.jsxs,passKeys:true,passNode:true});var Do=/\[\^[^\]\s]{1,200}\](?!:)/,jo=/\[\^[^\]\s]{1,200}\]:/,Oo=/<\/(\w+)>/,Ho=/<(\w+)[\s>]/,we=e=>{let t=0;for(;t<e.length&&(e[t]===" "||e[t]==="	"||e[t]===`
`||e[t]==="\r");)t+=1;return t+1<e.length&&e[t]==="$"&&e[t+1]==="$"},qo=e=>{let t=e.length-1;for(;t>=0&&(e[t]===" "||e[t]==="	"||e[t]===`
`||e[t]==="\r");)t-=1;return t>=1&&e[t]==="$"&&e[t-1]==="$"},ke=e=>{let t=0;for(let o=0;o<e.length-1;o+=1)e[o]==="$"&&e[o+1]==="$"&&(t+=1,o+=1);return t},ve=e=>{let t=Do.test(e),o=jo.test(e);if(t||o)return [e];let n=marked.Lexer.lex(e,{gfm:true}),s=[],r=[];for(let i of n){let a=i.raw,l=s.length;if(r.length>0){if(s[l-1]+=a,i.type==="html"){let m=a.match(Oo);if(m){let c=m[1];r.at(-1)===c&&r.pop();}}continue}if(i.type==="html"&&i.block){let m=a.match(Ho);if(m){let c=m[1];a.includes(`</${c}>`)||r.push(c);}}if(a.trim()==="$$"&&l>0){let m=s[l-1],c=we(m),p=ke(m);if(c&&p%2===1){s[l-1]=m+a;continue}}if(l>0&&qo(a)){let m=s[l-1],c=we(m),p=ke(m),g=ke(a);if(c&&p%2===1&&!we(a)&&g===1){s[l-1]=m+a;continue}}s.push(a);}return s};var zo=/(\*\*)([^*]*?)$/,Wo=/(__)([^_]*?)$/,Uo=/(\*\*\*)([^*]*?)$/,_o=/(\*)([^*]*?)$/,Fo=/(_)([^_]*?)$/,Xo=/(`)([^`]*?)$/,Jo=/(~~)([^~]*?)$/,q=/^[\s_~*`]*$/,Nt=/^[\s]*[-*+][\s]+$/,Vo=/[\p{L}\p{N}_]/u,Ko=/^```[^`\n]*```?$/,Zo=/^\*{4,}$/,R=e=>{if(!e)return  false;let t=e.charCodeAt(0);return t>=48&&t<=57||t>=65&&t<=90||t>=97&&t<=122||t===95?true:Vo.test(e)},le=e=>{let t=(e.match(/```/g)||[]).length;return t>0&&t%2===0&&e.includes(`
`)};var Go=(e,t)=>{let o=1;for(let n=t-1;n>=0;n-=1)if(e[n]==="]")o+=1;else if(e[n]==="["&&(o-=1,o===0))return n;return  -1},Yo=(e,t)=>{let o=1;for(let n=t+1;n<e.length;n+=1)if(e[n]==="[")o+=1;else if(e[n]==="]"&&(o-=1,o===0))return n;return  -1},Ce=(e,t)=>{let o=false,n=false;for(let s=0;s<t;s+=1){if(e.substring(s,s+3)==="```"){n=!n,s+=2;continue}!n&&e[s]==="`"&&(o=!o);}return o||n},Qo=e=>{let t=e.lastIndexOf("](");if(t!==-1&&!Ce(e,t)&&!e.substring(t+2).includes(")")){let n=Go(e,t);if(n!==-1&&!Ce(e,n)){let s=n>0&&e[n-1]==="!",r=s?n-1:n,i=e.substring(0,r),a=e.substring(n+1,t);return s?i:`${i}[${a}](streamdown:incomplete-link)`}}for(let o=e.length-1;o>=0;o-=1)if(e[o]==="["&&!Ce(e,o)){let n=o>0&&e[o-1]==="!",s=n?o-1:o;if(!e.substring(o+1).includes("]")){let a=e.substring(0,s);return n?a:`${e}](streamdown:incomplete-link)`}if(Yo(e,o)===-1){let a=e.substring(0,s);return n?a:`${e}](streamdown:incomplete-link)`}}return e},en=e=>{if(le(e))return e;let t=e.match(zo);if(t){let o=t[2];if(!o||q.test(o))return e;let n=e.lastIndexOf(t[1]),r=e.substring(0,n).lastIndexOf(`
`),i=r===-1?0:r+1,a=e.substring(i,n);if(Nt.test(a)&&o.includes(`
`))return e;if((e.match(/\*\*/g)||[]).length%2===1)return `${e}**`}return e},tn=e=>{let t=e.match(Wo);if(t){let o=t[2];if(!o||q.test(o))return e;let n=e.lastIndexOf(t[1]),r=e.substring(0,n).lastIndexOf(`
`),i=r===-1?0:r+1,a=e.substring(i,n);if(Nt.test(a)&&o.includes(`
`))return e;if((e.match(/__/g)||[]).length%2===1)return `${e}__`}return e},on=e=>{let t=0,o=e.length;for(let n=0;n<o;n+=1){if(e[n]!=="*")continue;let s=n>0?e[n-1]:"",r=n<o-1?e[n+1]:"";if(s==="\\"||s==="*"||r==="*"||s&&r&&R(s)&&R(r))continue;let i=0;for(let l=n-1;l>=0;l-=1)if(e[l]===`
`){i=l+1;break}let a=true;for(let l=i;l<n;l+=1)if(e[l]!==" "&&e[l]!=="	"){a=false;break}a&&(r===" "||r==="	")||(t+=1);}return t},nn=e=>{if(le(e))return e;if(e.match(_o)){let o=-1;for(let r=0;r<e.length;r+=1)if(e[r]==="*"&&e[r-1]!=="*"&&e[r+1]!=="*"&&e[r-1]!=="\\"){let i=r>0?e[r-1]:"",a=r<e.length-1?e[r+1]:"";if(i&&a&&R(i)&&R(a))continue;o=r;break}if(o===-1)return e;let n=e.substring(o+1);if(!n||q.test(n))return e;if(on(e)%2===1)return `${e}*`}return e},xt=(e,t)=>{let o=false,n=false;for(let s=0;s<e.length&&s<t;s+=1){if(e[s]==="\\"&&e[s+1]==="$"){s+=1;continue}e[s]==="$"&&(e[s+1]==="$"?(n=!n,s+=1,o=false):n||(o=!o));}return o||n},rn=e=>{let t=e.includes("$"),o=0,n=e.length;for(let s=0;s<n;s+=1){if(e[s]!=="_")continue;let r=s>0?e[s-1]:"",i=s<n-1?e[s+1]:"";r!=="\\"&&(t&&xt(e,s)||r==="_"||i==="_"||r&&i&&R(r)&&R(i)||(o+=1));}return o},sn=e=>{if(le(e))return e;if(e.match(Fo)){let o=-1;for(let r=0;r<e.length;r+=1)if(e[r]==="_"&&e[r-1]!=="_"&&e[r+1]!=="_"&&e[r-1]!=="\\"&&!xt(e,r)){let i=r>0?e[r-1]:"",a=r<e.length-1?e[r+1]:"";if(i&&a&&R(i)&&R(a))continue;o=r;break}if(o===-1)return e;let n=e.substring(o+1);if(!n||q.test(n))return e;if(rn(e)%2===1){let r=e.length;for(;r>0&&e[r-1]===`
`;)r-=1;if(r<e.length){let i=e.slice(0,r),a=e.slice(r);return `${i}_${a}`}return `${e}_`}}return e},an=(e,t)=>{let o=e.substring(t,t+3)==="```",n=t>0&&e.substring(t-1,t+2)==="```",s=t>1&&e.substring(t-2,t+1)==="```";return o||n||s},ln=e=>{let t=0;for(let o=0;o<e.length;o+=1)e[o]==="`"&&!an(e,o)&&(t+=1);return t},cn=e=>{if(e.match(Ko)&&!e.includes(`
`))return e.endsWith("``")&&!e.endsWith("```")?`${e}\``:e;let o=(e.match(/```/g)||[]).length,n=o%2===1;if(o>0&&o%2===0&&e.includes(`
`)||(e.endsWith("```\n")||e.endsWith("```"))&&o%2===0)return e;let s=e.match(Xo);if(s&&!n){let r=s[2];if(!r||q.test(r))return e;if(ln(e)%2===1)return `${e}\``}return e},dn=e=>{let t=e.match(Jo);if(t){let o=t[2];if(!o||q.test(o))return e;if((e.match(/~~/g)||[]).length%2===1)return `${e}~~`}return e},mn=e=>{if((e.match(/\$\$/g)||[]).length%2===0)return e;let o=e.indexOf("$$");return o!==-1&&e.indexOf(`
`,o)!==-1&&!e.endsWith(`
`)?`${e}
$$`:`${e}$$`},pn=e=>{let t=0,o=0;for(let n=0;n<e.length;n+=1)e[n]==="*"?o+=1:(o>=3&&(t+=Math.floor(o/3)),o=0);return o>=3&&(t+=Math.floor(o/3)),t},un=e=>{if(le(e)||Zo.test(e))return e;let t=e.match(Uo);if(t){let o=t[2];if(!o||q.test(o))return e;if(pn(e)%2===1)return `${e}***`}return e},Me=e=>{if(!e||typeof e!="string")return e;let t=e,o=Qo(t);return o.endsWith("](streamdown:incomplete-link)")?o:(t=o,t=un(t),t=en(t),t=tn(t),t=nn(t),t=sn(t),t=cn(t),t=dn(t),t=mn(t),t)};var Mn={raw:wn__default.default,katex:[Pe__default.default,{errorColor:"var(--color-muted-foreground)"}],harden:[rehypeHarden.harden,{allowedImagePrefixes:["*"],allowedLinkPrefixes:["*"],allowedProtocols:["*"],defaultOrigin:void 0,allowDataImages:true}]},Pn={gfm:[Cn__default.default,{}],math:[Te__default.default,{singleDollarTextMath:false}],cjkFriendly:[kn__default.default,{}],cjkFriendlyGfmStrikethrough:[vn__default.default,{}]},Tn=Object.values(Mn),Nn=Object.values(Pn),xn={shikiTheme:["github-light","github-dark"],controls:true,isAnimating:false,mode:"streaming",mermaid:void 0},M=react.createContext(xn),Bt=react.memo(({content:e,shouldParseIncompleteMarkdown:t,...o})=>{let n=react.useMemo(()=>typeof e=="string"&&t?Me(e.trim()):e,[e,t]);return jsxRuntime.jsx(ye,{...o,children:n})},(e,t)=>{if(e.content!==t.content||e.shouldParseIncompleteMarkdown!==t.shouldParseIncompleteMarkdown||e.index!==t.index)return  false;if(e.components!==t.components){let o=Object.keys(e.components||{}),n=Object.keys(t.components||{});if(o.length!==n.length||o.some(s=>{var r,i;return ((r=e.components)==null?void 0:r[s])!==((i=t.components)==null?void 0:i[s])}))return  false}return !(e.rehypePlugins!==t.rehypePlugins||e.remarkPlugins!==t.remarkPlugins)});Bt.displayName="Block";var Sn=["github-light","github-dark"],In=react.memo(({children:e,mode:t="streaming",parseIncompleteMarkdown:o=true,components:n,rehypePlugins:s=Tn,remarkPlugins:r=Nn,className:i,shikiTheme:a=Sn,mermaid:l,controls:d=true,isAnimating:m=false,BlockComponent:c=Bt,parseMarkdownIntoBlocksFn:p=ve,...g})=>{let f=react.useId(),[h,w]=react.useTransition(),[v,N]=react.useState([]),P=react.useMemo(()=>p(typeof e=="string"?e:""),[e,p]);react.useEffect(()=>{t==="streaming"?w(()=>{N(P);}):N(P);},[P,t]);let T=t==="streaming"?v:P,D=react.useMemo(()=>T.map((B,A)=>`${f}-${A}`),[T.length,f]),j=react.useMemo(()=>({shikiTheme:a,controls:d,isAnimating:m,mode:t,mermaid:l}),[a,d,m,t,l]),O=react.useMemo(()=>({...vt,...n}),[n]);return react.useEffect(()=>{if(!(Array.isArray(s)&&s.some(S=>Array.isArray(S)?S[0]===Pe__default.default:S===Pe__default.default)))return;let A=false;if(Array.isArray(r)){let S=r.find(Z=>Array.isArray(Z)?Z[0]===Te__default.default:Z===Te__default.default);S&&Array.isArray(S)&&S[1]&&(A=S[1].singleDollarTextMath===true);}let L=typeof e=="string"?e:"",H=L.includes("$$"),y=A&&(/[^$]\$[^$]/.test(L)||/^\$[^$]/.test(L)||/[^$]\$$/.test(L));(H||y)&&import('katex/dist/katex.min.css');},[s,r,e]),t==="static"?jsxRuntime.jsx(M.Provider,{value:j,children:jsxRuntime.jsx("div",{className:u("space-y-4 whitespace-normal",i),children:jsxRuntime.jsx(ye,{components:O,rehypePlugins:s,remarkPlugins:r,...g,children:e})})}):jsxRuntime.jsx(M.Provider,{value:j,children:jsxRuntime.jsx("div",{className:u("space-y-4 whitespace-normal",i),children:T.map((B,A)=>jsxRuntime.jsx(c,{components:O,content:B,index:A,rehypePlugins:s,remarkPlugins:r,shouldParseIncompleteMarkdown:o,...g},D[A]))})})},(e,t)=>e.children===t.children&&e.shikiTheme===t.shikiTheme&&e.isAnimating===t.isAnimating&&e.mode===t.mode);In.displayName="Streamdown";var Et=({children:e,className:t,minZoom:o=.5,maxZoom:n=3,zoomStep:s=.1,showControls:r=true,initialZoom:i=1,fullscreen:a=false})=>{let l=react.useRef(null),d=react.useRef(null),[m,c]=react.useState(i),[p,g]=react.useState({x:0,y:0}),[f,h]=react.useState(false),[w,v]=react.useState({x:0,y:0}),[N,P]=react.useState({x:0,y:0}),T=react.useCallback(y=>{c(x=>Math.max(o,Math.min(n,x+y)));},[o,n]),D=react.useCallback(()=>{T(s);},[T,s]),j=react.useCallback(()=>{T(-s);},[T,s]),O=react.useCallback(()=>{c(i),g({x:0,y:0});},[i]),B=react.useCallback(y=>{y.preventDefault();let x=y.deltaY>0?-s:s;T(x);},[T,s]),A=react.useCallback(y=>{if(y.button!==0||y.isPrimary===false)return;h(true),v({x:y.clientX,y:y.clientY}),P(p);let x=y.currentTarget;x instanceof HTMLElement&&x.setPointerCapture(y.pointerId);},[p]),L=react.useCallback(y=>{if(!f)return;y.preventDefault();let x=y.clientX-w.x,S=y.clientY-w.y;g({x:N.x+x,y:N.y+S});},[f,w,N]),H=react.useCallback(y=>{h(false);let x=y.currentTarget;x instanceof HTMLElement&&x.releasePointerCapture(y.pointerId);},[]);return react.useEffect(()=>{let y=l.current;if(y)return y.addEventListener("wheel",B,{passive:false}),()=>{y.removeEventListener("wheel",B);}},[B]),react.useEffect(()=>{let y=d.current;if(y&&f)return document.body.style.userSelect="none",y.addEventListener("pointermove",L,{passive:false}),y.addEventListener("pointerup",H),y.addEventListener("pointercancel",H),()=>{document.body.style.userSelect="",y.removeEventListener("pointermove",L),y.removeEventListener("pointerup",H),y.removeEventListener("pointercancel",H);}},[f,L,H]),jsxRuntime.jsxs("div",{className:u("relative",a?"h-full w-full":"w-full",t),ref:l,style:{cursor:f?"grabbing":"grab"},children:[r&&jsxRuntime.jsxs("div",{className:u("absolute z-10 flex flex-col gap-1 rounded-md border border-border bg-background/90 p-1 shadow-sm backdrop-blur-sm",a?"bottom-4 left-4":"bottom-2 left-2"),children:[jsxRuntime.jsx("button",{className:"flex items-center justify-center rounded p-1.5 text-muted-foreground transition-colors hover:bg-muted hover:text-foreground disabled:cursor-not-allowed disabled:opacity-50",disabled:m>=n,onClick:D,title:"Zoom in",type:"button",children:jsxRuntime.jsx(lucideReact.ZoomInIcon,{size:16})}),jsxRuntime.jsx("button",{className:"flex items-center justify-center rounded p-1.5 text-muted-foreground transition-colors hover:bg-muted hover:text-foreground disabled:cursor-not-allowed disabled:opacity-50",disabled:m<=o,onClick:j,title:"Zoom out",type:"button",children:jsxRuntime.jsx(lucideReact.ZoomOutIcon,{size:16})}),jsxRuntime.jsx("button",{className:"flex items-center justify-center rounded p-1.5 text-muted-foreground transition-colors hover:bg-muted hover:text-foreground",onClick:O,title:"Reset zoom and pan",type:"button",children:jsxRuntime.jsx(lucideReact.RotateCcwIcon,{size:16})})]}),jsxRuntime.jsx("div",{className:u("origin-center transition-transform duration-150 ease-out",a&&"flex w-full items-center justify-center"),onPointerDown:A,ref:d,role:"application",style:{transform:`translate(${p.x}px, ${p.y}px) scale(${m})`,transformOrigin:"center center",touchAction:"none",willChange:"transform"},children:e})]})};var De=({chart:e,className:t,config:o,fullscreen:n=false,showControls:s=true})=>{let[r,i]=react.useState(null),[a,l]=react.useState(true),[d,m]=react.useState(""),[c,p]=react.useState(""),[g,f]=react.useState(0),{mermaid:h}=react.useContext(M),w=h==null?void 0:h.errorComponent;if(react.useEffect(()=>{(async()=>{try{i(null),l(!0);let P=await Q(o),T=e.split("").reduce((O,B)=>(O<<5)-O+B.charCodeAt(0)|0,0),D=`mermaid-${Math.abs(T)}-${Date.now()}-${Math.random().toString(36).substring(2,9)}`,{svg:j}=await P.render(D,e);m(j),p(j);}catch(P){if(!(c||d)){let T=P instanceof Error?P.message:"Failed to render Mermaid chart";i(T);}}finally{l(false);}})();},[e,o,g]),a&&!d&&!c)return jsxRuntime.jsx("div",{className:u("my-4 flex justify-center p-4",t),children:jsxRuntime.jsxs("div",{className:"flex items-center space-x-2 text-muted-foreground",children:[jsxRuntime.jsx("div",{className:"h-4 w-4 animate-spin rounded-full border-current border-b-2"}),jsxRuntime.jsx("span",{className:"text-sm",children:"Loading diagram..."})]})});if(r&&!d&&!c){let N=()=>f(P=>P+1);return w?jsxRuntime.jsx(w,{chart:e,error:r,retry:N}):jsxRuntime.jsxs("div",{className:u("rounded-lg border border-red-200 bg-red-50 p-4",t),children:[jsxRuntime.jsxs("p",{className:"font-mono text-red-700 text-sm",children:["Mermaid Error: ",r]}),jsxRuntime.jsxs("details",{className:"mt-2",children:[jsxRuntime.jsx("summary",{className:"cursor-pointer text-red-600 text-xs",children:"Show Code"}),jsxRuntime.jsx("pre",{className:"mt-2 overflow-x-auto rounded bg-red-100 p-2 text-red-800 text-xs",children:e})]})]})}let v=d||c;return jsxRuntime.jsx(Et,{className:u(n?"h-full w-full overflow-hidden":"my-4 overflow-hidden",t),fullscreen:n,maxZoom:3,minZoom:.5,showControls:s,zoomStep:.1,children:jsxRuntime.jsx("div",{"aria-label":"Mermaid chart",className:u("flex justify-center",n&&"h-full w-full items-center"),dangerouslySetInnerHTML:{__html:v},role:"img"})})};exports.a=u;exports.b=Ht;exports.c=De;exports.d=ve;exports.e=Me;exports.f=Mn;exports.g=Pn;exports.h=M;exports.i=Bt;exports.j=In;